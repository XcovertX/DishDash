{% load static %}
{% for comment in comments %}
  <div class="comment">
    <div class="comment-header">
      <p class="comment-header-username">@{{ comment.user.username }}:</p>
      <p class="comment-info">{{ comment.created_at }}</p>
    </div>

    <p class="comment-text">{{ comment.text }}</p>

    <!-- Reply button for authenticated users -->
    {% if user.is_authenticated %}
      <button class="reply-button"   data-comment-id="{{ comment.id }}">Reply</button>
      <button class="like-button"    data-comment-id="{{ comment.id }}">
        <img src="{% static 'icons/thumbs-up.png' %}" alt="like">
      </button>
      <span   class="like-count"     data-comment-id="{{ comment.id }}">{{ comment.likes.count }}</span>
      <button class="dislike-button" data-comment-id="{{ comment.id }}">
        <img src="{% static 'icons/thumbs-down.png' %}" alt="dislike">
      </button>
      <span   class="dislike-count"  data-comment-id="{{ comment.id }}">{{ comment.dislikes.count }}</span>
    {% endif %}

    
    
    <!-- Show/hide replies button -->
    {% if comment.replies.all %}
      <button class="toggle-replies" data-comment-id="{{ comment.id }}">{{ comment.replies.count }} </button>
    {% endif %}

    <!-- Container for replies -->
    <div class="replies-container" data-comment-id="{{ comment.id }}" style="display: none;">
      {% include 'partials/comment_tree.html' with comments=comment.replies.all %}
    </div>
  </div>
{% endfor %}

